import{b5 as q,r as L,c as I,bG as ee,bH as oe,z as ne,d as U,aP as S,aQ as T,aR as f,bI as J,aY as e,aU as t,bo as W,bk as E,bv as V,aS as B,aT as l,aZ as b,aW as C,bJ as N,ae as G,w as K,a_ as w,bK as Q,aL as te,bL as le,J as ae,bl as se,b3 as re,ba as de,bF as ce}from"./index.js";import{b as ie}from"./dark-mode-switch.vue_vue_type_script_setup_true_lang.js";/* empty css                                                */import{R as ue,f as R,_ as D,a as j,g as pe,b as X}from"./rule.js";import{_ as Y}from"./Checkbox.js";import{_ as O}from"./Input.js";import{_ as H}from"./Space.js";import{u as me}from"./use-loading.js";import{_ as _e}from"./GradientText.js";import"./format-length.js";import"./get.js";import"./use-merged-state.js";import"./Suffix.js";import"./use-houdini.js";function fe(g){if(g<=0&&g%1!==0)throw new Error("倒计时的时间应该为一个正整数！");const{bool:a,setTrue:s,setFalse:i}=q(!1),u=L(0),n=I(()=>!!u.value);let d;function o(m=g){u.value||(i(),u.value=m,d=setInterval(()=>{u.value-=1,u.value<=0&&(clearInterval(d),s())},1e3))}function p(){d=clearInterval(d),u.value=0}return ee(p),{counts:u,isCounting:n,start:o,stop:p,isComplete:a}}function A(){const{loading:g,startLoading:a,endLoading:s}=me(),{counts:i,start:u,isCounting:n}=fe(60),d="获取验证码",o=h=>`${h}秒后重新获取`,p=I(()=>{let h=d;return g.value&&(h=""),n.value&&(h=o(i.value)),h});function m(h){var _,c;let r=!0;return h.trim()===""?((_=window.$message)==null||_.error("手机号码不能为空！"),r=!1):ue.test(h)||((c=window.$message)==null||c.error("手机号码格式错误！"),r=!1),r}async function v(h){var c;if(!m(h)||g.value)return;a();const{data:_}=await oe(h);_&&((c=window.$message)==null||c.success("验证码发送成功！"),u()),s()}return{label:p,start:u,isCounting:n,getSmsCode:v,loading:g}}function ge(g=152,a=40){const s=L(),i=L("");function u(d){i.value=d}function n(){s.value&&(i.value=he(s.value,g,a))}return ne(()=>{n()}),{domRef:s,imgCode:i,setImgCode:u,getImgCode:n}}function z(g,a){return Math.floor(Math.random()*(a-g)+g)}function Z(g,a){const s=z(g,a),i=z(g,a),u=z(g,a);return`rgb(${s},${i},${u})`}function he(g,a,s){let i="";const u="0123456789",n=g.getContext("2d");if(!n)return i;n.fillStyle=Z(180,230),n.fillRect(0,0,a,s);for(let d=0;d<4;d+=1){const o=u[z(0,u.length)];i+=o;const p=z(18,41),m=z(-30,30);n.font=`${p}px Simhei`,n.textBaseline="top",n.fillStyle=Z(80,150),n.save(),n.translate(30*d+23,15),n.rotate(m*Math.PI/180),n.fillText(o,-15+5,-15),n.restore()}for(let d=0;d<5;d+=1)n.beginPath(),n.moveTo(z(0,a),z(0,s)),n.lineTo(z(0,a),z(0,s)),n.strokeStyle=Z(180,230),n.closePath(),n.stroke();for(let d=0;d<41;d+=1)n.beginPath(),n.arc(z(0,a),z(0,s),1,0,2*Math.PI),n.closePath(),n.fillStyle=Z(150,200),n.fill();return i}const ve={height:"1337",width:"1337"},we=f("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1),be={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},Ce=["stop-color"],ke=["stop-color"],ye=f("g",{opacity:"1"},[f("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1),xe=U({__name:"corner-top",props:{startColor:{default:"#28aff0"},endColor:{default:"#120fc4"}},setup(g){return(a,s)=>(S(),T("svg",ve,[f("defs",null,[we,f("linearGradient",be,[f("stop",{offset:"0","stop-color":a.startColor,"stop-opacity":"1"},null,8,Ce),f("stop",{offset:"1","stop-color":a.endColor,"stop-opacity":"1"},null,8,ke)])]),ye]))}}),$e={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",height:"896",width:"967.8852157128662"},Pe=f("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1),ze={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},Se=["stop-color"],Re=["stop-color"],Le=f("g",{opacity:"1"},[f("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1),Ue=U({__name:"corner-bottom",props:{startColor:{default:"#28aff0"},endColor:{default:"#120fc4"}},setup(g){return(a,s)=>(S(),T("svg",$e,[f("defs",null,[Pe,f("linearGradient",ze,[f("stop",{offset:"0","stop-color":a.startColor,"stop-opacity":"1"},null,8,Se),f("stop",{offset:"1","stop-color":a.endColor,"stop-opacity":"1"},null,8,Re)])]),Le]))}}),Me={class:"absolute-lt z-1 wh-full overflow-hidden"},Ie={class:"absolute -right-300px -top-900px <sm:(-right-100px -top-1170px)"},Ne={class:"absolute -left-200px -bottom-400px <sm:(-left-100px -bottom-760px)"},Te=U({__name:"index",props:{themeColor:{}},setup(g){const a=g,s=I(()=>J(a.themeColor,3)),i=I(()=>J(a.themeColor,6));return(u,n)=>(S(),T("div",Me,[f("div",Ie,[e(t(xe),{"start-color":s.value,"end-color":i.value},null,8,["start-color","end-color"])]),f("div",Ne,[e(t(Ue),{"start-color":i.value,"end-color":s.value},null,8,["start-color","end-color"])])]))}}),Be={class:"flex-y-center justify-between"},Ge={class:"flex-y-center justify-between"},Ee=f("div",{class:"w-12px"},null,-1),Ve=U({__name:"index",setup(g){const a=W(),{login:s}=W(),{toLoginModule:i}=E(),u=L(),n=V({userName:"",password:""}),d={password:R.pwd},o=L(!1);async function p(){var h;await((h=u.value)==null?void 0:h.validate());const{userName:m,password:v}=n;s(m,v)}return(m,v)=>{const h=O,r=D,_=Y,c=G,k=H,$=j;return S(),B($,{ref_key:"formRef",ref:u,model:n,rules:d,size:"large","show-label":!1},{default:l(()=>[e(r,{path:"userName"},{default:l(()=>[e(h,{value:n.userName,"onUpdate:value":v[0]||(v[0]=y=>n.userName=y),placeholder:m.$t("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])]),_:1}),e(r,{path:"password"},{default:l(()=>[e(h,{value:n.password,"onUpdate:value":v[1]||(v[1]=y=>n.password=y),type:"password","show-password-on":"click",placeholder:m.$t("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e(k,{vertical:!0,size:24},{default:l(()=>[f("div",Be,[e(_,{checked:o.value,"onUpdate:checked":v[2]||(v[2]=y=>o.value=y)},{default:l(()=>[b(C(m.$t("page.login.pwdLogin.rememberMe")),1)]),_:1},8,["checked"]),e(c,{text:!0,onClick:v[3]||(v[3]=y=>t(i)("reset-pwd"))},{default:l(()=>[b(C(m.$t("page.login.pwdLogin.forgetPassword")),1)]),_:1})]),e(c,{type:"primary",size:"large",block:!0,round:!0,loading:t(a).loginLoading,onClick:p},{default:l(()=>[b(C(m.$t("page.login.common.confirm")),1)]),_:1},8,["loading"]),f("div",Ge,[e(c,{class:"flex-1",block:!0,onClick:v[4]||(v[4]=y=>t(i)("code-login"))},{default:l(()=>[b(C(t(N)["code-login"]),1)]),_:1}),Ee,e(c,{class:"flex-1",block:!0,onClick:v[5]||(v[5]=y=>t(i)("register"))},{default:l(()=>[b(C(t(N).register),1)]),_:1})])]),_:1})]),_:1},8,["model"])}}}),De=U({name:"ImageVerify",__name:"image-verify",props:{code:{default:""}},emits:["update:code"],setup(g,{expose:a,emit:s}){const i=g,{domRef:u,imgCode:n,setImgCode:d,getImgCode:o}=ge();return K(()=>i.code,p=>{d(p)}),K(n,p=>{s("update:code",p)}),a({getImgCode:o}),(p,m)=>(S(),T("div",null,[f("canvas",{ref_key:"domRef",ref:u,width:"152",height:"40",class:"cursor-pointer",onClick:m[0]||(m[0]=(...v)=>t(o)&&t(o)(...v))},null,512)]))}}),je={class:"flex-y-center w-full"},Oe=f("div",{class:"w-18px"},null,-1),He={class:"pl-8px"},Ze=U({__name:"index",setup(g){const a=W(),{toLoginModule:s}=E(),{label:i,isCounting:u,loading:n,getSmsCode:d}=A(),o=L(),p=V({phone:"",code:"",imgCode:""}),m=L(""),v={phone:R.phone,code:R.code,imgCode:pe(m)};function h(){d(p.phone)}async function r(){var _,c;await((_=o.value)==null?void 0:_.validate()),(c=window.$message)==null||c.success(w("page.login.common.validateSuccess"))}return(_,c)=>{const k=O,$=D,y=G,x=De,F=H,P=j;return S(),B(P,{ref_key:"formRef",ref:o,model:p,rules:v,size:"large","show-label":!1},{default:l(()=>[e($,{path:"phone"},{default:l(()=>[e(k,{value:p.phone,"onUpdate:value":c[0]||(c[0]=M=>p.phone=M),placeholder:t(w)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),e($,{path:"code"},{default:l(()=>[f("div",je,[e(k,{value:p.code,"onUpdate:value":c[1]||(c[1]=M=>p.code=M),placeholder:t(w)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),Oe,e(y,{size:"large",disabled:t(u),loading:t(n),onClick:h},{default:l(()=>[b(C(t(i)),1)]),_:1},8,["disabled","loading"])])]),_:1}),e($,{path:"imgCode"},{default:l(()=>[e(k,{value:p.imgCode,"onUpdate:value":c[2]||(c[2]=M=>p.imgCode=M),placeholder:t(w)("page.login.codeLogin.imageCodePlaceholder")},null,8,["value","placeholder"]),f("div",He,[e(x,{code:m.value,"onUpdate:code":c[3]||(c[3]=M=>m.value=M)},null,8,["code"])])]),_:1}),e(F,{vertical:!0,size:18},{default:l(()=>[e(y,{type:"primary",size:"large",block:!0,round:!0,loading:t(a).loginLoading,onClick:r},{default:l(()=>[b(C(t(w)("page.login.common.confirm")),1)]),_:1},8,["loading"]),e(y,{size:"large",block:!0,round:!0,onClick:c[4]||(c[4]=M=>t(s)("pwd-login"))},{default:l(()=>[b(C(t(w)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}}),Ae={class:"w-full text-14px"},Fe=U({name:"LoginAgreement",__name:"login-agreement",props:{value:{type:Boolean,default:!0}},emits:["update:value","click-protocol","click-policy"],setup(g,{emit:a}){const s=g,i=I({get(){return s.value},set(d){a("update:value",d)}});function u(){a("click-protocol")}function n(){a("click-policy")}return(d,o)=>{const p=Y,m=G;return S(),T("div",Ae,[e(p,{checked:i.value,"onUpdate:checked":o[0]||(o[0]=v=>i.value=v)},{default:l(()=>[b("我已经仔细阅读并接受")]),_:1},8,["checked"]),e(m,{text:!0,type:"primary",onClick:u},{default:l(()=>[b("《用户协议》")]),_:1}),e(m,{text:!0,type:"primary",onClick:n},{default:l(()=>[b("《隐私权政策》")]),_:1})])}}}),Je={class:"flex-y-center w-full"},We=f("div",{class:"w-18px"},null,-1),Ke=U({__name:"index",setup(g){const{toLoginModule:a}=E(),{label:s,isCounting:i,loading:u,start:n}=A(),d=L(),o=V({phone:"",code:"",pwd:"",confirmPwd:""}),p={phone:R.phone,code:R.code,pwd:R.pwd,confirmPwd:X(Q(o).pwd)},m=L(!1);function v(){n()}async function h(){var r,_;await((r=d.value)==null?void 0:r.validate()),(_=window.$message)==null||_.success(w("page.login.common.validateSuccess"))}return(r,_)=>{const c=O,k=D,$=G,y=Fe,x=H,F=j;return S(),B(F,{ref_key:"formRef",ref:d,model:o,rules:p,size:"large","show-label":!1},{default:l(()=>[e(k,{path:"phone"},{default:l(()=>[e(c,{value:o.phone,"onUpdate:value":_[0]||(_[0]=P=>o.phone=P),placeholder:t(w)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),e(k,{path:"code"},{default:l(()=>[f("div",Je,[e(c,{value:o.code,"onUpdate:value":_[1]||(_[1]=P=>o.code=P),placeholder:t(w)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),We,e($,{size:"large",disabled:t(i),loading:t(u),onClick:v},{default:l(()=>[b(C(t(s)),1)]),_:1},8,["disabled","loading"])])]),_:1}),e(k,{path:"pwd"},{default:l(()=>[e(c,{value:o.pwd,"onUpdate:value":_[2]||(_[2]=P=>o.pwd=P),type:"password","show-password-on":"click",placeholder:t(w)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e(k,{path:"confirmPwd"},{default:l(()=>[e(c,{value:o.confirmPwd,"onUpdate:value":_[3]||(_[3]=P=>o.confirmPwd=P),type:"password","show-password-on":"click",placeholder:t(w)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e(x,{vertical:!0,size:18},{default:l(()=>[e(y,{value:m.value,"onUpdate:value":_[4]||(_[4]=P=>m.value=P)},null,8,["value"]),e($,{type:"primary",size:"large",block:!0,round:!0,onClick:h},{default:l(()=>[b(C(t(w)("page.login.common.confirm")),1)]),_:1}),e($,{size:"large",block:!0,round:!0,onClick:_[5]||(_[5]=P=>t(a)("pwd-login"))},{default:l(()=>[b(C(t(w)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}}),Qe={class:"flex-y-center w-full"},Xe=f("div",{class:"w-18px"},null,-1),Ye=U({__name:"index",setup(g){const{toLoginModule:a}=E(),{label:s,isCounting:i,loading:u,start:n}=A(),d=L(),o=V({phone:"",code:"",pwd:"",confirmPwd:""}),p={phone:R.phone,code:R.code,pwd:R.pwd,confirmPwd:X(Q(o).pwd)};function m(){n()}async function v(){var h,r;await((h=d.value)==null?void 0:h.validate()),(r=window.$message)==null||r.success(w("page.login.common.validateSuccess"))}return(h,r)=>{const _=O,c=D,k=G,$=H,y=j;return S(),B(y,{ref_key:"formRef",ref:d,model:o,rules:p,size:"large","show-label":!1},{default:l(()=>[e(c,{path:"phone"},{default:l(()=>[e(_,{value:o.phone,"onUpdate:value":r[0]||(r[0]=x=>o.phone=x),placeholder:t(w)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),e(c,{path:"code"},{default:l(()=>[f("div",Qe,[e(_,{value:o.code,"onUpdate:value":r[1]||(r[1]=x=>o.code=x),placeholder:t(w)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),Xe,e(k,{size:"large",disabled:t(i),loading:t(u),onClick:m},{default:l(()=>[b(C(t(s)),1)]),_:1},8,["disabled","loading"])])]),_:1}),e(c,{path:"pwd"},{default:l(()=>[e(_,{value:o.pwd,"onUpdate:value":r[2]||(r[2]=x=>o.pwd=x),type:"password","show-password-on":"click",placeholder:t(w)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e(c,{path:"confirmPwd"},{default:l(()=>[e(_,{value:o.confirmPwd,"onUpdate:value":r[3]||(r[3]=x=>o.confirmPwd=x),type:"password","show-password-on":"click",placeholder:t(w)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e($,{vertical:!0,size:"large"},{default:l(()=>[e(k,{type:"primary",size:"large",block:!0,round:!0,onClick:v},{default:l(()=>[b(C(t(w)("page.login.common.confirm")),1)]),_:1}),e(k,{size:"large",block:!0,round:!0,onClick:r[4]||(r[4]=x=>t(a)("pwd-login"))},{default:l(()=>[b(C(t(w)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}}),qe={class:"flex-y-center w-full"},eo=f("div",{class:"w-18px"},null,-1),oo=U({__name:"index",setup(g){const{toLoginModule:a}=E(),{label:s,isCounting:i,loading:u,getSmsCode:n}=A(),d=L(),o=V({phone:"",code:"",imgCode:""}),p={phone:R.phone,code:R.code};function m(){n(o.phone)}async function v(){var h,r;await((h=d.value)==null?void 0:h.validate()),(r=window.$message)==null||r.success(w("page.login.common.validateSuccess"))}return(h,r)=>{const _=O,c=D,k=G,$=H,y=j;return S(),B(y,{ref_key:"formRef",ref:d,model:o,rules:p,size:"large","show-label":!1},{default:l(()=>[e(c,{path:"phone"},{default:l(()=>[e(_,{value:o.phone,"onUpdate:value":r[0]||(r[0]=x=>o.phone=x),placeholder:t(w)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),e(c,{path:"code"},{default:l(()=>[f("div",qe,[e(_,{value:o.code,"onUpdate:value":r[1]||(r[1]=x=>o.code=x),placeholder:t(w)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),eo,e(k,{size:"large",disabled:t(i),loading:t(u),onClick:m},{default:l(()=>[b(C(t(s)),1)]),_:1},8,["disabled","loading"])])]),_:1}),e($,{vertical:!0,size:"large"},{default:l(()=>[e(k,{type:"primary",size:"large",block:!0,round:!0,onClick:v},{default:l(()=>[b(C(t(w)("page.login.common.confirm")),1)]),_:1}),e(k,{size:"large",block:!0,round:!0,onClick:r[2]||(r[2]=x=>t(a)("pwd-login"))},{default:l(()=>[b(C(t(w)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}}),no={class:"w-300px sm:w-360px"},to={class:"flex-y-center justify-between"},lo={class:"pt-24px"},ao={class:"text-18px text-primary font-medium"},so={class:"pt-24px"},ko=U({__name:"index",props:{module:{}},setup(g){const a=g,s=te(),i=[{key:"pwd-login",label:N["pwd-login"],component:Ve},{key:"code-login",label:N["code-login"],component:Ze},{key:"register",label:N.register,component:Ke},{key:"reset-pwd",label:N["reset-pwd"],component:Ye},{key:"bind-wechat",label:N["bind-wechat"],component:oo}],u=I(()=>{const o={...i[0]},p=i.find(m=>m.key===a.module);return p&&Object.assign(o,p),o}),n=I(()=>s.darkMode?J(s.themeColor,7):s.themeColor),d=I(()=>{const o="#ffffff",p=s.darkMode?.5:.2;return le(o,s.themeColor,p)});return(o,p)=>{const m=ie,v=de,h=_e,r=ce;return S(),T("div",{class:"relative flex-center wh-full",style:re({backgroundColor:d.value})},[e(m,{dark:t(s).darkMode,class:"absolute left-48px top-24px z-3 text-20px","onUpdate:dark":t(s).setDarkMode},null,8,["dark","onUpdate:dark"]),e(r,{bordered:!1,size:"large",class:"z-4 !w-auto rounded-20px shadow-sm"},{default:l(()=>[f("div",no,[f("header",to,[e(v,{class:"text-64px text-primary"}),e(h,{type:"primary",size:28},{default:l(()=>[b(C(t(w)("system.title")),1)]),_:1})]),f("main",lo,[f("h3",ao,C(u.value.label),1),f("div",so,[e(ae,{name:"fade-slide",mode:"out-in",appear:""},{default:l(()=>[(S(),B(se(u.value.component)))]),_:1})])])])]),_:1}),e(t(Te),{"theme-color":n.value},null,8,["theme-color"])],4)}}});export{ko as default};
